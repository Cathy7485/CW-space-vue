import{x as I,e as l,q as a}from"./index-EuictSfj.js";import{u as L}from"./statusStore-AFPkqGff.js";import{a as O}from"./axios-B4uVmeYG.js";var P={VITE_DATA_URL:"https://json-server-vercel-cw-space.vercel.app",VITE_PATH:"cw-space-vue",BASE_URL:"/CW-space-vue/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_DATA_URL:A}=P,V=I("spaceStore",()=>{const c=l([]),n=l(0),u=l(["day","month","year"]),o=l(1),g=L(),{loadingActive:v}=g,s=a(()=>c.value.find(e=>e.id===n.value+1)||null),h=a(()=>s.value?s.value.type:null),_=a(()=>s.value&&s.value.space?s.value.space.type:null),p=a(()=>c.value.filter(e=>{const t=u.value[n.value];return e.type[0]&&e.type[0].price&&Object.keys(e.type[0].price).includes(t)})),f=a(()=>{const e=p.value.find(r=>r.name==="共享辦公空間");if(!e)return[];const t=new Map;return e.type.forEach(r=>{const S=JSON.stringify(r.price);t.has(S)||t.set(S,r)}),Array.from(t.values())}),d=a(()=>{const e=p.value.find(t=>t.name==="獨立辦公空間");return e?e.type:[]}),y=a(()=>c.value.filter(e=>e.type[0]&&e.type[0].price&&!Object.keys(e.type[0].price).includes("free"))),i=a(()=>y.value.find(e=>e.id===o.value)||null),m=a(()=>i.value?i.value.type:null);return{getSpaceList:async()=>{try{v(!0);const e=await O.get(`${A}/spaces`);c.value=e.data}catch(e){console.error("Error loading space list:",e),c.value=[]}finally{v(!1)}},getPlanList:e=>e==="共享辦公空間"?f.value:d.value,changeIdx:e=>{n.value=e},changeSpaceId:e=>{o.value=e},spaceList:c,activeIdx:n,activeSpace:s,spaceDetail:h,spaceType:_,planList:u,activePlan:p,sharedOfficePrices:f,privateOfficePrices:d,spacePlan:y,spaceId:o,pickedSpace:i,pickedType:m}});export{V as u};
