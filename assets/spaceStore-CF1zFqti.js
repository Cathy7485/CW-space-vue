import{L as I,e as l,g as a}from"./index-B1EJfjqm.js";import{u as O}from"./statusStore-CN1jttri.js";import{a as P}from"./axios-B4uVmeYG.js";var A={VITE_DATA_URL:"https://json-server-vercel-cw-space.vercel.app",VITE_PATH:"cw-space-vue",BASE_URL:"/CW-space-vue/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_DATA_URL:E}=A,V=I("spaceStore",()=>{const t=l([]),n=l(0),u=l(["day","month","year"]),o=l(1),g=O(),{loadingActive:v}=g,s=a(()=>t.value.find(e=>e.id===n.value+1)||null),m=a(()=>s.value?s.value.type:null),h=a(()=>s.value&&s.value.space?s.value.space.type:null),L=a(()=>t.value.map(e=>e.imgUrl[0])),p=a(()=>t.value.filter(e=>{const c=u.value[n.value];return e.type[0]&&e.type[0].price&&Object.keys(e.type[0].price).includes(c)})),f=a(()=>{const e=p.value.find(r=>r.name==="共享辦公空間");if(!e)return[];const c=new Map;return e.type.forEach(r=>{const S=JSON.stringify(r.price);c.has(S)||c.set(S,r)}),Array.from(c.values())}),d=a(()=>{const e=p.value.find(c=>c.name==="獨立辦公空間");return e?e.type:[]}),y=a(()=>t.value.filter(e=>e.type[0]&&e.type[0].price&&!Object.keys(e.type[0].price).includes("free"))),i=a(()=>y.value.find(e=>e.id===o.value)||null),_=a(()=>i.value?i.value.type:null);return{getSpaceList:async()=>{try{v(!0);const e=await P.get(`${E}/spaces`);t.value=e.data}catch(e){console.error("Error loading space list:",e),t.value=[]}finally{v(!1)}},getPlanList:e=>e==="共享辦公空間"?f.value:d.value,changeIdx:e=>{n.value=e},changeSpaceId:e=>{o.value=e},spaceList:t,activeIdx:n,activeSpace:s,spaceDetail:m,spaceType:h,imagesList:L,planList:u,activePlan:p,sharedOfficePrices:f,privateOfficePrices:d,spacePlan:y,spaceId:o,pickedSpace:i,pickedType:_}});export{V as u};
